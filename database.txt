DROP DATABASE VETCLOUD;

CREATE DATABASE VETCLOUD;

USE VETCLOUD;

CREATE TABLE User(
UserID VARCHAR(10) NOT NULL,
EmployeeID VARCHAR(10) NOT NULL,
UserName VARCHAR(50) NOT NULL UNIQUE,
Password VARCHAR(15) NOT NULL,
email VARCHAR(30) NOT NULL,
CONSTRAINT PRIMARY KEY(UserID,UserName),
CONSTRAINT FOREIGN KEY(EmployeeID) REFERENCES Employee(EmployeeID)
);



CREATE TABLE Customer(
CustomerID VARCHAR(10) NOT NULL,
CustTitle VARCHAR(6),
CustName VARCHAR(70) NOT NULL,
NIC VARCHAR(14),
DOB DATE NOT NULL,
age INT(3) NOT NULL,
Gender VARCHAR(10),
contact VARCHAR(13),
email VARCHAR(150),
address VARCHAR(200),
UserID VARCHAR(10),
CONSTRAINT PRIMARY KEY(CustomerID),
CONSTRAINT FOREIGN KEY(UserID) REFERENCES User(UserID)
);

CREATE TABLE Pet(
PetID VARCHAR(10) NOT NULL,
Name VARCHAR(50) NOT NULL,
CustomerID VARCHAR(10) NOT NULL,
Type VARCHAR(50) NOT NULL,
Breed VARCHAR(100),
Gender VARCHAR(20),
DOB DATE,
Age INT(3),
Contact VARCHAR(15),
Address VARCHAR(200),
CONSTRAINT PRIMARY KEY(PetID),
CONSTRAINT FOREIGN KEY(CustomerID) REFERENCES Customer(CustomerID)
);

CREATE TABLE Reports(
ReportID VARCHAR(10) NOT NULL,
PetID VARCHAR(10) NOT NULL,
Name VARCHAR(50) NOT NULL,
Type VARCHAR(200),
Date DATE,
Description VARCHAR(500),
CONSTRAINT PRIMARY KEY(ReportID),
CONSTRAINT FOREIGN KEY(PetID) REFERENCES Pet(PetID)
ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Inhouse(
InhouseID VARCHAR(10) NOT NULL,
PetID VARCHAR(10) NOT NULL,
CustomerID VARCHAR(10) NOT NULL,
AdmittedDate DATE,
Time TIME,
DischargeDate DATE,
Description VARCHAR(500),
Contact VARCHAR(15) NOT NULL,
email VARCHAR(50),
CONSTRAINT PRIMARY KEY(InhouseID),
CONSTRAINT FOREIGN KEY(PetID) REFERENCES Pet(PetID)
ON UPDATE CASCADE ON DELETE CASCADE
);



CREATE TABLE InhousePet(
InhouseID VARCHAR(10) NOT NULL,
PetID VARCHAR(10) NOT NULL,
CONSTRAINT PRIMARY KEY(InhouseID,PetID),
CONSTRAINT FOREIGN KEY(InhouseID) REFERENCES Inhouse(InhouseID)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FOREIGN KEY(PetID) REFERENCES Pet(PetID)
ON UPDATE CASCADE ON DELETE CASCADE
);


CREATE TABLE Employee(
EmployeeID VARCHAR(10) NOT NULL,
Name VARCHAR(100) NOT NULL,
UserID VARCHAR(10) ,
DOB DATE NOT NULL,
NIC VARCHAR(15) ,
Age INT(3) NOT NULL,
gender VARCHAR(10) NOT NULL,
address VARCHAR(150),
salary DECIMAL(7,2),
contact VARCHAR(15),
email VARCHAR(50),
CONSTRAINT PRIMARY KEY(EmployeeID),
CONSTRAINT FOREIGN KEY(UserID) REFERENCES User(UserID)
);


CREATE TABLE EmployeeSchedule(
ScheduleID VARCHAR(10) NOT NULL,
Name VARCHAR(100) NOT NULL,
Date DATE,
Time TIME,
WorkTime VARCHAR(20),
Shift VARCHAR(10),
OT VARCHAR(20),
CONSTRAINT PRIMARY KEY(ScheduleID)

);

CREATE TABLE OperationSchedule(
OperationID VARCHAR(10) NOT NULL,
PetID VARCHAR(10) NOT NULL,
CustomerID VARCHAR(10) NOT NULL,
Date DATE NOT NULL,
Time TIME,
Description VARCHAR(500),
Hours INT(3),
Contact VARCHAR(15) NOT NULL,
CONSTRAINT PRIMARY KEY(OperationID),
CONSTRAINT FOREIGN KEY(PetID) REFERENCES Pet(PetID)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FOREIGN KEY(CustomerID) REFERENCES Pet(CustomerID)
ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE VaccinationSchedule(
VaccinationID VARCHAR(10) NOT NULL,
PetID VARCHAR(10) NOT NULL,
CustomerID VARCHAR(10) NOT NULL,
Date DATE NOT NULL,
Time TIME,
Description VARCHAR(400) NOT NULL,
Contact VARCHAR(15),
CONSTRAINT PRIMARY KEY(VaccinationID),
CONSTRAINT FOREIGN KEY(PetID) REFERENCES Pet(PetID)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FOREIGN KEY(CustomerID) REFERENCES Pet(CustomerID)
ON UPDATE CASCADE ON DELETE CASCADE
);


CREATE TABLE ClinicSchedule(
ClinicID VARCHAR(10) NOT NULL,
PetID VARCHAR(10) NOT NULL,
CustomerID VARCHAR(10) NOT NULL,
Date DATE NOT NULL,
Time TIME,
Type VARCHAR(200) NOT NULL,
Description VARCHAR(500),
Contact VARCHAR(15),
CONSTRAINT PRIMARY KEY(ClinicID),
CONSTRAINT FOREIGN KEY(PetID) REFERENCES Pet(PetID)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FOREIGN KEY(CustomerID) REFERENCES Pet(CustomerID)
ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Bill(
BillID VARCHAR(10) NOT NULL,
CustomerID VARCHAR(10) NOT NULL,
Name VARCHAR(100) NOT NULL,
Date DATE NOT NULL,
Time TIME NOT NULL,
Amount DECIMAL(10,2) NOT NULL,
Contact VARCHAR(15),
email VARCHAR(50),
Description VARCHAR(500),
CONSTRAINT PRIMARY KEY(BillID),
CONSTRAINT FOREIGN KEY(CustomerID) REFERENCES Customer(CustomerID)
);

CREATE TABLE EmpSched(
ScheduleID VARCHAR(10) NOT NULL,
EmployeeID VARCHAR(10) NOT NULL,
CONSTRAINT PRIMARY KEY(ScheduleID,EmployeeID),
CONSTRAINT FOREIGN KEY(ScheduleID) REFERENCES EmployeeSchedule(ScheduleID)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FOREIGN KEY(EmployeeID) REFERENCES Employee(EmployeeID)
ON UPDATE CASCADE ON DELETE CASCADE
);



CREATE TABLE Item(
ItemID VARCHAR(10) NOT NULL,
Name VARCHAR(100) NOT NULL,
Man_Date DATE NOT NULL,
Exp_Date DATE NOT NULL,
Type VARCHAR(100) NOT NULL,
Description VARCHAR(500),
CONSTRAINT PRIMARY KEY(ItemID)
);
//////

CREATE TABLE Supplier(
SupplierID VARCHAR(10) NOT NULL,
Name VARCHAR(100) NOT NULL,
NIC VARCHAR(20) NOT NULL UNIQUE,
contact VARCHAR(15) NOT NULL,
address VARCHAR(200),
type VARCHAR(400),
email VARCHAR(100),
Description VARCHAR(500),
CONSTRAINT PRIMARY KEY(SupplierID)
);

CREATE TABLE ItemSupplier(
ItemID VARCHAR(10) NOT NULL,
SupplierID VARCHAR(10) NOT NULL,
CONSTRAINT PRIMARY KEY(ItemID,SupplierID),
CONSTRAINT FOREIGN KEY(ItemID) REFERENCES Item(ItemID)
ON UPDATE CASCADE ON DELETE CASCADE,
CONSTRAINT FOREIGN KEY(SupplierID) REFERENCES Supplier(SupplierID)
ON UPDATE CASCADE ON DELETE CASCADE
);




